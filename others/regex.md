## 正则表达式

### 什么是正则表达式？

正则表达式是在一个主题字符串中从左到右匹配字符串时的一种样式，常用“regex”来表示，正则表达式可以从一个基础字符串中根据一定的匹配模式替换文本中的字符串、验证表单、提取字符串等。一般以“^”开始，以$结尾。

---

###　基本匹配

正则表达式就是在执行搜索时的格式，它由一些字母和数字组成，如一个字符串the，它表示有字母t开始，接着是h，再接着是n，一次匹配。逐个与输入的字符串做匹配，并且大小写敏感。

## 2. 元字符 

| 描述  |                    元字符                    |
| :---: | :------------------------------------------: |
|   .   |         匹配任意单个字符，除了换行符         |
|  [ ]  |        字符种类，匹配[ ]内的任意字符         |
| [^ ]  | 否定的字符种类，匹配除了方括号里面的任意字符 |
|   *   |        匹配>=0 个重复的在*之前的字符         |
|   +   |         匹配>=1个重复的+号之前的字符         |
|   ?   |            标记？之前的字符为可选            |
| {n,m} |    匹配nums个大括号之前的字符，n=<nums<=m    |
| (xyz) |      字符集，匹配与xyz完全相等的字符串       |
|  \|   |         或运算符，匹配前或者后的字符         |
|   \   |        转义字符，匹配符号前或后的字符        |
|   ^   |               从开始行开始匹配               |
|   $   |                从末端开始匹配                |

### 2.1 点运算符

. 是元字符中最简单的例子， 匹配任意单个字符，但不匹配换行符，例如表达式.ar表示匹配任意一个字符后面是a和r的字符串。

### 2.2 字符集

字符集也叫做字符类，方括号用来指定一个字符集，在方括号中使用连字符来指定字符集的范围，在方括号中的字符集不关系顺序，例如表达式[Tt]he匹配The 或者 the。

另外，方括号中的点就表示点，如ar[.]就匹配为ar.

否定字符集：通常情况下^表示一次为开头的字符串，但用在方括号里面则表示不以此为开头的字符串，如[ ^ c ]ar,表示除了c以外开头的ar字符串。

### 2.3 重复次数

后面跟着+ , * , ? 的，用来指定匹配子模式的次数，这些元字符在不同的情况下有不同的含义。

#### 2.3.1 * 号

\*号匹配在\*号之前的字符出现大于等于0次，如表达式a\*,表示匹配以0或者更多个a开头的字符，也就是匹配了所有的字符串，表达式[a-z]*表示匹配一个行中所有以小写字母开头的字符串。\* 字符和. 字符搭配可以匹配所有的字符。

#### 2.3.2 +号

+号表示匹配+号之前的字符出现>=1次，例如表达式c.+t,表示匹配以c开头，t结尾，中间跟着任意多个字符的字符串。

#### 2.3.3 ? 号

正则表达式中元字符?标记在符号前面的字符为可选，即出现0或者1次，如表达式[T]?he匹配The或者he。

### 2.4 { } 号

正则表达式中，{}是一个量词，常用来一个或者一组字符可以重复出现的次数，例如表达式[0-9]{2,3}表示匹配最少两位最多3位的0-9数字。

可以省略第二个参数，如[0-9]{2,}表示匹配最少两位的0-9的数字

省略逗号，则为[0-9]{3},表示匹配固定的3位长度的数字。

### 2.5 （...）特征标群

特征标群是一组写在(...)中的子模式，例如上面说的{}是用来表示前面一个字符出现指定次数，但如果在{}前加入特征表群，则表示整个标群内的字符重复n次，例如表达式(ab)*表示匹配连续出现0或者多个ab。还可以在()中加入 | 字符，如（a | b | c）test,表示匹配atest或者btest或者ctest。

### 2.6 | 或运算符

或运算符就表示或运算。 例如 `(T|t)he|car` 匹配 `(T|t)he` 或 `car`或运算符表示或，用作判断条件。

### 2.7 转码特殊字符

反斜线\在表达式中用于转码紧跟其后的字符，用于指定{ }, [ ], / \ + * . $ ^ | ? 等这些特殊字符。如果想要匹配这些特殊字符，需要在其前面加上\.

### 2.8 锚点

正则表达式中，想要匹配指定开头或者结尾的字符串就要使用到锚点。 ^ 指定开头，$指定结尾。

#### 2.8.1 ^号

^ 号用来检查匹配的字符串是都在所匹配字符串的开头，例如在abc中使用^a会得到结果a，但是使用^b将不会得到结果，因为不是以b开头的。

例如 ^(T | t)he表示匹配以the或者The为开头的字符串。

#### 2.8.2 $号

同理与^号，用来匹配字符串是否是最后一个，例如（at\.）$ 表示匹配以at. 为结尾的字符串。

## 简写字符集

主常用的有

| \\w  | 匹配所有的字母数字 |
| :--: | :----------------: |
|  \W  | 匹配所有非字母数字 |
|  \d  |   匹配所有的数字   |
|  \D  |   匹配所有非数字   |

## 零宽度断言（前后预查）

…………………………

## 标志

| 标志 |                    描述                    |
| :--: | :----------------------------------------: |
|  i   |                 忽略大小写                 |
|  g   |                  全局搜索                  |
|  m   | 多行的，锚点元字符^ $ 工作范围在每行的起始 |

## 贪婪匹配与惰性匹配

正则表达式默认采用贪婪匹配模式，在该模式下意味着会匹配尽可能长的子串，我们可以使用?将贪婪模式转化为惰性匹配模式。

/.*at/ 匹配中间是任意多个的字符

/.*?at/变为惰性匹配。



## 正则表达式的优缺点

正则表达式非常灵活，可以帮助我们很快的定位到字符串，但是不同的语言的正则表达式不太一样，可移植性可能会比较差，另外，也有在正则匹配时候的一个效率问题，如何编写高性能的正则表达式才是我们所需要的。一般可以遵循如下的几条规则：

1. 使用正确的边界匹配器，（^ $  \b  \B）
2. 使用具体的元字符、字符类 （\d   \w）等
3. 使用正确的量词（+ - * ? {n ,m }）
4. 使用非捕获组、原子组
5. 注意量词的嵌套

